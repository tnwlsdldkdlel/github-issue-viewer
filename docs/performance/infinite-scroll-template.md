# 우선순위 2: 무한 스크롤 구현 후 성능 측정 결과

## 측정 정보

- **측정 일시**: 2025-11-12
- **우선순위**: 2 (무한 스크롤 구현)
- **구현 상태**: ✅ 완료
- **주요 기능**: 
  - Intersection Observer 기반 무한 스크롤
  - 자동 페이지 로드
  - "더 보기" 버튼 제거
  - `rootMargin: "800px"`, `threshold: 0` 설정으로 조기 로드

---

## 측정 환경

- **브라우저**: Chrome (Headless, Lighthouse 자동 실행)
- **OS**: macOS
- **측정 모드**: 개발 모드 (`npm run dev`)
- **측정 방법**: 자동화 스크립트
- **측정 일시**: 2025-11-12 13:39 (KST)

### 측정 시나리오

1. **초기 로드 (100개 이슈)**
   - 측정 방법: `npm run perf:auto:initial`
   - 로드된 이슈 수: 100개 (첫 페이지)

2. **대량 데이터 (500개 이슈)**
   - 측정 방법: `npm run perf:auto:500`
   - 로드된 이슈 수: 100개 (스크립트가 무한 스크롤을 제대로 트리거하지 못함)
   - **참고**: 무한 스크롤로 변경되면서 자동화 스크립트가 "더 보기" 버튼을 찾지 못해 실제로는 초기 로드만 측정됨

---

## Lighthouse 점수

### 초기 로드 (100개 이슈)

| 항목 | 점수 | 목표 | 이전 (우선순위 1) | 개선 |
|------|------|------|------------------|------|
| Performance | 53 / 100 | 80점 이상 | 53 / 100 | 0 (동일) |
| Accessibility | 92 / 100 | 90점 이상 | 93 / 100 | -1 (소폭 감소) |
| Best Practices | 96 / 100 | 90점 이상 | 96 / 100 | 0 (동일) |
| SEO | 100 / 100 | 90점 이상 | 100 / 100 | 0 (동일) |

### 대량 데이터 (500개 이슈)

| 항목 | 점수 | 목표 | 이전 (우선순위 1) | 개선 |
|------|------|------|------------------|------|
| Performance | 53 / 100 | 80점 이상 | 53 / 100 | 0 (동일) |
| Accessibility | 92 / 100 | 90점 이상 | 93 / 100 | -1 (소폭 감소) |
| Best Practices | 96 / 100 | 90점 이상 | 96 / 100 | 0 (동일) |
| SEO | 100 / 100 | 90점 이상 | 100 / 100 | 0 (동일) |

### 분석
- **Performance 점수**: 우선순위 1과 동일 (53점)
- **Accessibility 점수**: 93점 → 92점으로 소폭 감소 (무한 스크롤 구현으로 인한 접근성 영향 가능)
- **Lighthouse 측정 한계**: 초기 페이지 로드만 측정하므로 무한 스크롤의 실제 성능 차이는 반영되지 않음

---

## 주요 메트릭

### 초기 로드 (100개 이슈)

#### Core Web Vitals

| 메트릭 | 값 | 목표 | 이전 (우선순위 1) | 개선 |
|--------|-----|------|------------------|------|
| First Contentful Paint (FCP) | 0.76초 | 1.8초 이하 | 0.76초 | 0초 (동일) |
| Largest Contentful Paint (LCP) | 10.80초 | 2.5초 이하 | 10.65초 | +0.15초 (소폭 증가) |
| Total Blocking Time (TBT) | 990ms | 200ms 이하 | 1,000ms | -10ms (소폭 개선) |
| Cumulative Layout Shift (CLS) | 0 | 0.1 이하 | 0 | 0 (동일) |

#### 추가 메트릭

| 메트릭 | 값 | 목표 | 이전 (우선순위 1) | 개선 |
|--------|-----|------|------------------|------|
| Time to Interactive (TTI) | 10.80초 | 3.8초 이하 | 10.65초 | +0.15초 (소폭 증가) |
| Speed Index | 1.43초 | 3.4초 이하 | 1.20초 | +0.23초 (소폭 증가) |

### 대량 데이터 (500개 이슈)

**참고**: 자동화 스크립트가 무한 스크롤을 제대로 트리거하지 못해 실제로는 초기 로드만 측정됨

#### Core Web Vitals

| 메트릭 | 값 | 목표 | 이전 (우선순위 1) | 개선 |
|--------|-----|------|------------------|------|
| First Contentful Paint (FCP) | 0.76초 | 1.8초 이하 | 0.76초 | 0초 (동일) |
| Largest Contentful Paint (LCP) | 10.70초 | 2.5초 이하 | 10.66초 | +0.04초 (거의 동일) |
| Total Blocking Time (TBT) | 1,000ms | 200ms 이하 | 1,000ms | 0ms (동일) |
| Cumulative Layout Shift (CLS) | 0 | 0.1 이하 | 0 | 0 (동일) |

#### 추가 메트릭

| 메트릭 | 값 | 목표 | 이전 (우선순위 1) | 개선 |
|--------|-----|------|------------------|------|
| Time to Interactive (TTI) | 10.66초 | 3.8초 이하 | 10.66초 | 0초 (동일) |
| Speed Index | 1.37초 | 3.4초 이하 | 1.33초 | +0.04초 (소폭 증가) |

### 메트릭 비교 분석

| 메트릭 | 초기 로드 (100개) | 522개 이슈 | 차이 |
|--------|------------------|-----------|------|
| Performance | 53점 | 53점 | 동일 |
| FCP | 0.76초 | 0.76초 | 동일 |
| LCP | 10.80초 | 10.70초 | -0.10초 (소폭 개선) |
| TBT | 990ms | 1,000ms | +10ms (소폭 증가) |
| CLS | 0 | 0 | 동일 |
| TTI | 10.80초 | 10.66초 | -0.14초 (소폭 개선) |
| Speed Index | 1.43초 | 1.37초 | -0.06초 (소폭 개선) |

**참고**: Lighthouse는 초기 페이지 로드만 측정하므로 무한 스크롤로 추가된 이슈는 반영되지 않습니다. 실제 성능 차이는 Chrome DevTools Performance 측정 결과를 참고하세요.

### 메트릭 분석
- **초기 로드와 500개 이슈 로드 후 측정 결과가 거의 동일함**
  - 이는 Lighthouse가 초기 페이지 로드만 측정하기 때문입니다
  - 무한 스크롤로 자동 로드된 추가 이슈는 측정에 포함되지 않습니다
  - 실제 성능 차이는 Chrome DevTools Performance로 측정해야 합니다

- **우선순위 1 대비 변화**:
  - **FCP (0.76초)**: 동일 ✅
  - **LCP (10.80초)**: 10.65초 → 10.80초로 소폭 증가 (Intersection Observer 추가로 인한 영향 가능)
  - **TBT (990ms)**: 1,000ms → 990ms로 소폭 개선
  - **CLS (0)**: 레이아웃 시프트 없음 ✅
  - **Speed Index (1.43초)**: 1.20초 → 1.43초로 소폭 증가

---

## Chrome DevTools Performance 측정 결과

Chrome DevTools Performance API를 사용하여 이미 로드된 페이지의 현재 상태를 측정한 결과입니다. Lighthouse와 달리 무한 스크롤로 추가된 이슈도 포함하여 측정합니다.

### 초기 로드 (100개 이슈)

| 항목 | 값 | 이전 (우선순위 1) | 개선 |
|------|-----|------------------|------|
| DOM 노드 수 | 551개 | 552개 | -1개 (거의 동일) |
| 이슈 아이템 수 | 35개 | 35개 | 0개 (동일) |
| 메모리 사용량 | 43.46 MB | 43.43 MB | +0.03 MB (거의 동일) |
| FCP (Performance API) | 0.08초 | 0.09초 | -0.01초 (소폭 개선) |
| DOM Content Loaded | 0.04초 | 0.03초 | +0.01초 (거의 동일) |
| Load Complete | 0.32초 | 0.31초 | +0.01초 (거의 동일) |

### 대량 데이터 (500개 이슈)

**참고**: 수정된 자동화 스크립트로 무한 스크롤을 트리거하여 실제로 522개 이슈를 로드한 후 측정

| 항목 | 값 | 이전 (우선순위 1) | 개선 |
|------|-----|------------------|------|
| DOM 노드 수 | 7,551개 | 2,105개 | +5,446개 (+259%, 3.6배 증가) |
| 이슈 아이템 수 | 522개 | 139개 | +383개 (+275%, 3.8배 증가) |
| 메모리 사용량 | 55.88 MB | 48.48 MB | +7.4 MB (+15.3%) |
| FCP (Performance API) | 0.08초 | 0.08초 | 0초 (동일) |
| DOM Content Loaded | 0.03초 | 0.05초 | -0.02초 (소폭 개선) |
| Load Complete | 0.36초 | 0.33초 | +0.03초 (소폭 증가) |

### 성능 차이 분석

**주요 발견 사항:**

1. **초기 로드 성능은 우선순위 1과 거의 동일**
   - DOM 노드 수: 552개 → 551개 (거의 동일)
   - 이슈 아이템 수: 35개 → 35개 (동일)
   - 메모리 사용량: 43.43 MB → 43.46 MB (거의 동일)
   - Intersection Observer 추가로 인한 성능 영향은 미미함

2. **대량 데이터 (522개 이슈) 성능 분석**
   - **DOM 노드 수**: 2,105개 → 7,551개 (3.6배 증가)
     - 이슈 수가 3.8배 증가했지만 DOM 노드 수는 3.6배 증가로 상대적으로 양호
     - 하지만 절대값이 7,551개로 매우 많아 스크롤 성능 저하 예상
   - **이슈 아이템 수**: 139개 → 522개 (3.8배 증가)
     - 무한 스크롤이 정상 작동하여 목표 수치 달성
   - **메모리 사용량**: 48.48 MB → 55.88 MB (+15.3%)
     - 이슈 수 증가에 비해 메모리 증가가 상대적으로 적음 (React Query 캐싱 효과)
     - 하지만 절대값이 55.88 MB로 증가하여 계속 증가할 가능성
   - **Lighthouse 메트릭**: 우선순위 1과 거의 동일
     - Lighthouse는 초기 페이지 로드만 측정하므로 무한 스크롤로 추가된 이슈는 반영되지 않음

3. **우선순위 1 대비 개선점**
   - **UX 개선**: "더 보기" 버튼 클릭 불필요, 자동 로드로 사용자 편의성 향상
   - **자동화 측정 가능**: 수정된 스크립트로 실제 대량 데이터 성능 측정 가능

4. **우선순위 1 대비 문제점**
   - **DOM 노드 수 급증**: 2,105개 → 7,551개로 3.6배 증가
     - 가상 스크롤 미적용으로 모든 이슈가 DOM에 렌더링됨
     - 스크롤 성능 저하 예상
   - **메모리 사용량 증가**: 48.48 MB → 55.88 MB (+15.3%)
     - 무한 스크롤로 계속 증가할 가능성
   - **렌더링 성능**: 대량 데이터에서 렌더링 시간 증가 예상

**결론:**
- 무한 스크롤 구현으로 UX는 개선되었지만, 가상 스크롤 미적용으로 대량 데이터에서 성능 저하가 발생
- 우선순위 3 (가상 스크롤) 적용이 필수적임

### 무한 스크롤 동작 성능

| 항목 | 값 | 목표 | 상태 |
|------|-----|------|------|
| 다음 페이지 자동 로드 시간 | ⏳ 측정 필요 | 500ms 이하 | ⏳ 측정 필요 |
| 스크롤 중 FPS | ⏳ 측정 필요 | 60fps | ⏳ 측정 필요 |
| Intersection Observer 트리거 지연 | ⏳ 측정 필요 | 100ms 이하 | ⏳ 측정 필요 |

---

## 개선 사항

### 우선순위 1 대비 개선점

1. **UX 개선**
   - "더 보기" 버튼 클릭 불필요
   - 자동으로 다음 페이지 로드
   - 사용자 경험 향상
   - `rootMargin: "800px"` 설정으로 조기 로드로 더 부드러운 스크롤 경험

2. **성능 개선**
   - **TBT 소폭 개선**: 1,000ms → 990ms (-10ms)
   - **초기 로드 성능 유지**: DOM 노드 수, 메모리 사용량 등이 우선순위 1과 거의 동일
   - **Intersection Observer 성능 영향 미미**: 초기 로드 성능에 큰 영향 없음

3. **코드 구조 개선**
   - `useRef`를 사용한 `fetchNextPage` 참조 안정화
   - Intersection Observer cleanup 로직 추가
   - 더 나은 메모리 관리

### 우선순위 1 대비 변화점

1. **소폭 성능 변화**
   - **LCP**: 10.65초 → 10.80초 (+0.15초, 소폭 증가)
   - **TBT**: 1,000ms → 990ms (-10ms, 소폭 개선)
   - **Speed Index**: 1.20초 → 1.43초 (+0.23초, 소폭 증가)
   - **Accessibility**: 93점 → 92점 (-1점, 소폭 감소)

2. **측정 완료**
   - ✅ 자동화 스크립트 수정 완료: 무한 스크롤 트리거 로직 추가
   - ✅ 실제 대량 데이터 (522개 이슈) 성능 측정 완료
   - ✅ 우선순위 1과 비교 분석 완료

### 예상되는 문제점

1. **대량 데이터 렌더링**
   - 1000개 이상 이슈 로드 시 성능 저하 여전히 예상
   - 가상 스크롤 미적용으로 인한 문제
   - DOM 노드 수가 계속 증가할 가능성

2. **자동 로드 성능**
   - Intersection Observer 동작 시 성능 영향 확인 필요
   - 무한 스크롤로 인한 메모리 사용량 증가 가능성
   - 스크롤 성능 저하 가능성 (대량 데이터에서)

3. **측정 도구 한계**
   - Lighthouse는 초기 로드만 측정하므로 무한 스크롤의 실제 성능 차이 반영 안 됨
   - 자동화 스크립트 수정 필요

---

## 다음 단계

### 우선순위 3: 가상 스크롤 적용 후

- [ ] 최종 성능 측정
- [ ] 우선순위 1, 2와 비교 분석
- [ ] 결과를 `virtual-scroll-YYYY-MM-DD.md`에 기록
- [ ] 성능 개선 효과 정량화
- [ ] 자동화 스크립트 수정 (무한 스크롤 트리거 로직 추가)

### 추가 작업 필요

- [x] 자동화 스크립트 수정: 무한 스크롤을 트리거하도록 스크립트 업데이트
- [x] 실제 대량 데이터 (522개 이슈) 성능 측정 완료
- [ ] 무한 스크롤 동작 성능 측정 (자동 로드 시간, 스크롤 FPS 등) - 선택사항

---

## 리포트 파일

- Lighthouse 초기 로드: `initial-load-2025-11-12.json`
- Lighthouse 500개 이슈: `load-500-issues-2025-11-12.json`
- DevTools 초기 로드: `devtools-initial-load-2025-11-12.json`
- DevTools 500개 이슈: `devtools-load-500-issues-2025-11-12.json`

---

## 참고

- 성능 측정 가이드: [README.md](./README.md)
- 기준선 측정 결과: [baseline-2025-11-12.md](./baseline-2025-11-12.md)
- 측정 도구 설명: [measurement-tools.md](./measurement-tools.md)

